@if (tutorId) {
  <div class="card bg-base-100 shadow-sm border border-base-200 sticky top-6">
    <div class="card-body p-6">
      
      <div class="flex flex-row justify-between items-center mb-6">
        <div class="flex items-center gap-3">
          <div class="p-2 bg-secondary/10 text-secondary rounded-lg">
            <lucide-angular [img]="PawPrint" size="20"></lucide-angular>
          </div>
          <h3 class="font-bold italic uppercase tracking-tight text-base-content/80">Pets</h3>
        </div>

        <app-button 
          variant="btn-primary" 
          size="btn-sm" 
          [icon]="Plus" 
          (action)="addRequest.emit()">
          Vincular
        </app-button>
      </div>

      <div class="flex flex-col gap-3">
        @for (pet of pets; track pet.id) {
          <div class="flex items-center justify-between p-3 bg-base-200/40 rounded-xl border border-base-300/50 group hover:bg-base-200 transition-all">
            <div class="flex items-center gap-3">
              <div class="avatar placeholder">
                <div class="w-10 h-10 rounded-full bg-base-300 overflow-hidden">
                  @if (pet?.foto?.url) {
                    <img [src]="pet?.foto?.url" class="object-cover h-full w-full">
                  } @else {
                    <app-image-placeholder [size]="18"></app-image-placeholder>
                  }
                </div>
              </div>
              <div class="min-w-0">
                <p class="font-bold text-sm truncate w-32">{{ pet.nome }}</p>
                <p class="text-[10px] opacity-50 uppercase tracking-tighter">{{ pet.raca }}</p>
              </div>
            </div>

            <button 
              type="button"
              class="btn btn-ghost btn-xs btn-circle text-error md:opacity-0 group-hover:opacity-100 transition-opacity"
              (click)="removeRequest.emit(pet.id!)">
              <lucide-angular [img]="Trash2" size="14"></lucide-angular>
            </button>
          </div>
        } @empty {
          <div class="py-10 border-2 border-dashed border-base-300 rounded-2xl flex flex-col items-center justify-center opacity-40">
            <lucide-angular [img]="Info" size="24" class="mb-2"></lucide-angular>
            <p class="text-xs italic text-center px-4">Nenhum pet vinculado.</p>
          </div>
        }
      </div>
    </div>
  </div>
} @else {
  <div class="card bg-base-100 border border-base-300 h-full min-h-75 flex items-center justify-center text-center p-8">
    <div class="max-w-50">
      <lucide-angular [img]="PawPrint" size="32" class="mx-auto mb-3 opacity-20"></lucide-angular>
      <p class="text-sm opacity-50 font-medium">Salve os dados do tutor para vincular os pets</p>
    </div>
  </div>
}
