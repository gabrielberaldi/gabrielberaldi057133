<div class="max-w-5xl mx-auto p-4 md:p-8">
  <div class="flex items-center justify-between mb-6 md:mb-8">
    <app-button variant="btn-outline" [icon]="ArrowLeft" (click)="onBack()">Voltar</app-button>
    <app-button variant="btn-neutral" [icon]="Pencil" (click)="onEdit()">Editar</app-button>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 md:gap-8">
    <div class="lg:col-span-4 flex justify-center lg:block">
      <div class="sticky top-8 w-full max-w-[320px] lg:max-w-none">
        <div class="aspect-square rounded-3xl overflow-hidden bg-base-200 shadow-xl border-4 border-white relative">
          @if (imageUrl) {
            <img [src]="imageUrl" class="w-full h-full object-cover" />
          } @else {
            <app-image-placeholder [icon]="imagePlaceholder" [size]="60"></app-image-placeholder>
          }
        </div>
      </div>
    </div>

    <div class="lg:col-span-8 space-y-6 md:space-y-8">
      <h1 class="text-4xl md:text-6xl font-black text-neutral uppercase tracking-tighter leading-none wrap-break-word">
        {{ title }}
      </h1>
      
      <ng-content select="[content]"></ng-content>

      <div class="divider my-2"></div>

      <div class="space-y-4">
        <h2 class="text-xs md:text-sm uppercase font-bold opacity-60 tracking-widest flex items-center gap-2">
          <lucide-angular [img]="listIcon" size="16"></lucide-angular>
          {{ listTitle }}
        </h2>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4">
          @for (item of listItems; track item.id) {
            <div class="card bg-base-100 border border-base-200 shadow-sm hover:border-primary/30 transition-colors">
              <div class="card-body p-3 md:p-4 flex-row items-center gap-3 md:gap-4">
                <div class="avatar"> 
                  <div class="w-10 h-10 rounded-full bg-base-300 overflow-hidden">
                    @if (item?.foto?.url) {
                      <img [src]="item.foto.url" class="object-cover h-full w-full">
                    } @else {
                      <div class="flex items-center justify-center h-full opacity-20 text-base-content">
                        <lucide-angular [img]="listItemImagePlaceholder" size="16"></lucide-angular>
                      </div>
                    }
                  </div>
                </div> 
                <div class="flex-1 min-w-0">
                  <p class="font-bold leading-tight text-sm truncate">{{ item.nome }}</p>
                  <p class="text-[10px] md:text-[11px] opacity-70 flex items-center gap-1 mt-1">
                    {{ item[listSubtitleProperty] }}
                  </p>
                </div>
                <button class="btn btn-ghost btn-xs btn-circle shrink-0" (click)="onItemClick(item.id)">
                  <lucide-angular [img]="ExternalLink" size="14"></lucide-angular>
                </button>
              </div>
            </div>
          } @empty {
            <div class="col-span-full p-6 border-2 border-dashed border-base-300 rounded-3xl text-center bg-base-200/30">
              <p class="text-sm italic opacity-50 font-medium">Nenhum registro vinculado.</p>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>